<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xiaofan.chat - 在线客服办理窗口</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            text-align: center;
            color: white;
            padding: 40px;
        }
        h1 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .subtitle {
            font-size: 1.5em;
            margin-bottom: 40px;
            opacity: 0.9;
        }
        .status {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .loading {
            color: #ffeb3b;
            font-size: 1.2em;
        }
        .error {
            color: #ff6b6b;
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>xiaofan.chat</h1>
        <div class="subtitle">在线客服系统</div>
        
        <div class="status">
            <div id="statusMessage" class="loading">正在加载客服系统...</div>
        </div>
        
        <div id="manualTrigger" style="display: none;">
            <button onclick="initMeiQia()" style="padding: 15px 30px; font-size: 1.2em; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
                点击启动在线客服
            </button>
        </div>
    </div>

    <!-- 美洽客服系统核心代码 -->
    <script type="text/javascript">
        function initMeiQia() {
            console.log('正在初始化美洽客服系统...');
            
            // 美洽加载代码
            (function(m, ei, q, i, a, j, s) {
                m[i] = m[i] || function() {
                    (m[i].a = m[i].a || []).push(arguments);
                };
                j = ei.createElement(q);
                s = ei.getElementsByTagName(q)[0];
                j.async = true;
                j.charset = 'UTF-8';
                j.src = 'https://static.meiqia.com/widget/loader.js';
                s.parentNode.insertBefore(j, s);
            })(window, document, 'script', '_MEIQIA');
            
            // 设置企业ID
            _MEIQIA('entId', 'b89e00c678ff516ca497668b179fe8d5');
            
            // 显示客服面板
            _MEIQIA('showPanel', {
                greeting: '您好！欢迎咨询，请问有什么可以帮您？'
            });
            
            // 更新状态显示
            document.getElementById('statusMessage').innerHTML = '客服系统已启动！';
            document.getElementById('statusMessage').className = '';
            document.getElementById('manualTrigger').style.display = 'none';
            
            console.log('美洽客服系统初始化完成');
        }
        
        // 页面加载后自动尝试初始化
        window.addEventListener('load', function() {
            console.log('页面加载完成，准备初始化客服系统');
            
            // 先显示手动触发按钮，防止自动弹出被浏览器阻止
            document.getElementById('manualTrigger').style.display = 'block';
            document.getElementById('statusMessage').innerHTML = '系统就绪，请点击按钮启动客服';
        });
        
        // 如果URL中有参数，自动初始化
        setTimeout(function() {
            var urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('entid')) {
                console.log('检测到entid参数，自动初始化');
                initMeiQia();
            }
        }, 1000);
    </script>
</body>
</html>
